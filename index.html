<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MeFan - è®©ä½“éªŒæ— çº¿è‡ªç”± (Apple-like Splitting Circle)</title>
  <style>
    /* ========== Reset & åŸºç¡€ ========== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Poppins', sans-serif;
      background-color: #fff;
      color: #333;
      line-height: 1.6;
      padding-top: 40px; /* åŸä¸»å¯¼èˆªé«˜åº¦ */
    }

    /* ========== åŸä¸»å¯¼èˆª ========== */
    .header-gradient {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 3000;
      padding: 10px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: linear-gradient(to right, #DEEFFF, #B2D8FF);
      transition: background 0.2s ease, transform 0.3s ease, opacity 0.3s ease;
      height: 60px;
    }
    .header-gradient.nav-white {
      background: #fff !important;
    }
    .logo-img {
      width: 60px;
      margin-right: 20px;
    }

    /* ========== æ¨ªå¹… Banner ========== */
    .banner-promo {
      margin-top: 40px;
      background-color: #EFF7FF;
      border-top: 1px solid #CBD5E1;
      border-bottom: 1px solid #CBD5E1;
      padding: 10px 0;
      text-align: center;
      font-size: 14px;
      color: #333;
    }
    .banner-promo a {
      color: #0071e3;
      text-decoration: none;
      font-weight: 500;
    }
    .banner-promo a:hover {
      text-decoration: underline;
    }

    /* ========== MeFan X1 å›¾ç‰‡åŒº ========== */
    .section1-hero {
      position: relative;
      width: 100%;
      margin: 0 auto;
      overflow: hidden;
      text-align: center;
      background-color: #000;
    }
    .section1-hero-img {
      width: 100%;
      height: auto;
      max-height: 520px;
      display: block;
      object-fit: cover;
    }
    .section1-hero-content {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: #fff;
      text-align: center;
      max-width: 90%;
    }
    .section1-title {
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
    }
    .section1-subtitle {
      font-size: 1.4rem;
      margin-bottom: 1rem;
    }
    .section1-buy-btn {
      display: inline-block;
      background-color: #0071e3;
      color: #fff;
      text-decoration: none;
      padding: 10px 20px;
      border-radius: 4px;
      font-size: 1rem;
      margin-bottom: 0.8rem;
    }
    .section1-buy-btn:hover {
      background-color: #005bb5;
    }
    .section1-price {
      font-size: 0.9rem;
      margin-top: 0;
    }

    /* ========== æ¡Œé¢ç«¯æ–°å¯¼èˆª (Mefan Air) ========== */
    .mefan-air-wrap {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 4000;
      background: #f8f8f8;
      border-bottom: 1px solid #ddd;
      padding: 10px 20px;
      transform: translateY(-100%);
      opacity: 0;
      transition: transform 0.3s ease, opacity 0.3s ease;
    }
    .mefan-air-wrap.active {
      transform: translateY(0);
      opacity: 1;
    }
    .mefan-air-nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      margin: 0;
      padding: 0;
    }
    .mefan-air-left {
      font-size: 1.2rem;
      font-weight: 600;
      margin: 0;
      padding: 0;
      margin-right: auto;
    }
    .mefan-air-list {
      list-style: none;
      display: flex;
      gap: 20px;
      margin: 0;
    }
    .mefan-air-list li a {
      text-decoration: none;
      color: #0071e3;
    }

    /* ========== ç§»åŠ¨ç«¯æ–°å¯¼èˆª (Mefan Air) ========== */
    .mobile-air-nav {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 5000;
      display: none;
      background-color: #fff;
      border-bottom: 1px solid #ddd;
      padding: 10px 20px;
    }
    .mobile-air-nav.active {
      display: block;
    }
    .mobile-air-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .mobile-air-left {
      font-size: 1rem;
      font-weight: 600;
      margin: 0;
      padding: 0;
    }
    .mobile-air-right {
      display: flex;
      align-items: center;
      gap: 16px;
    }
    .mobile-air-toggle-btn {
      font-size: 1.2rem;
      cursor: pointer;
      user-select: none;
    }
    .mobile-air-buy {
      padding: 6px 12px;
      background-color: #0071e3;
      color: #fff;
      text-decoration: none;
      border-radius: 4px;
    }
    .mobile-air-panel {
      overflow: hidden;
      width: 70%;
      max-height: 0;
      transition: max-height 0.3s ease;
    }
    .mobile-air-panel.active {
      max-height: 100vh;
    }
    .mobile-air-panel-list {
      list-style: none;
      margin: 0;
      padding: 0;
    }
    .mobile-air-panel-list li {
      border-bottom: 1px solid #eee;
    }
    .mobile-air-panel-list li a {
      display: block;
      padding: 14px 20px;
      text-decoration: none;
      color: #333;
    }
    .mobile-air-panel-list li a:hover {
      background-color: #f2f2f2;
    }
    .mobile-air-blur {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 0;
      z-index: 4500;
      background: rgba(0,0,0,0.3);
      backdrop-filter: blur(8px);
      transition: height 0.3s ease, opacity 0.3s ease;
      opacity: 0;
    }
    .mobile-air-blur.active {
      height: 100vh;
      opacity: 1;
    }

    @media (min-width: 769px) {
      .mobile-air-nav,
      .mobile-air-panel,
      .mobile-air-blur {
        display: none !important;
      }
    }
    @media (max-width: 768px) {
      .mefan-air-wrap {
        display: none !important;
      }
    }

    /* ===== Section2 Highlights (è½®æ’­) ===== */
    .section2-highlights {
      margin-top: 50px;
      padding: 30px 20px;
      text-align: center;
      position: relative; /* é‡è¦: ä¸ºç»å¯¹å®šä½æä¾›å‚è€ƒ */
    }
    .section2-title {
      font-size: 2.5rem;
      margin-bottom: 50px;
    }
    .section2-carousel-wrapper {
      width: 100%;
      max-width: 1013px;
      overflow: hidden;
      margin: 0 auto;
    }
    .section2-carousel-inner {
      display: flex;
      gap: 15px;
      transform: translateX(0);
      transition: transform 0.6s ease;
    }
    .section2-carousel-item {
      flex: 0 0 1013px; /* æ¯ä¸ªé¡¹ç›®å®½åº¦ä¸å›¾ç‰‡ä¸€è‡´ */
      position: relative;
    }
    .section2-carousel-item img {
      width: 100%;
      display: block;
    }
    .section2-caption {
      position: absolute;
      top: 20px;
      left: 20px;
      font-size: 1.5rem;
      color: #333;
    }

    /* è½®æ’­åº•éƒ¨â€œæ’­æ”¾+dots+åˆ·æ–°â€ */
    .section2-controls {
      display: flex;
      justify-content: center;
      align-items: center;
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.4s ease, transform 0.4s ease;
      margin-top: 20px;
    }
    .section2-controls.active {
      opacity: 1;
      transform: translateY(0);
    }
    .section2-dots {
      background: #f2f2f2;
      border-radius: 30px;
      padding: 8px 16px;
      display: flex;
      gap: 12px;
    }
    .section2-dot {
      width: 10px;
      height: 10px;
      background: #999;
      border-radius: 50%;
      cursor: pointer;
      transition: width 5s linear;
    }
    .section2-dot.active {
      width: 40px;
      background: #333;
      border-radius: 4px;
    }
    .section2-play-btn {
      font-size: 24px;
      background: none;
      border: none;
      cursor: pointer;
      margin-right: 16px;
      opacity: 0; /* åˆå§‹éšè— */
      transition: opacity 0.4s ease;
    }
    .section2-controls.active .section2-play-btn {
      opacity: 1;
    }
    .section2-refresh-btn {
      margin-left: 16px;
      font-size: 24px;
      background: none;
      border: none;
      cursor: pointer;
    }

    /* ========== æ¨¡æ‹Ÿè‹¹æœåˆ†è£‚å¼åœ†åœˆ ========== */
    /* çˆ¶å®¹å™¨: ç”¨äºå®šä½ + æ§åˆ¶å¯è§æ€§ */
    .split-circle-wrap {
      position: absolute;
      right: 50px;
      bottom: 30px;
      width: 80px;
      height: 80px;
      z-index: 9999; /* ç¡®ä¿åœ¨å›¾åƒä¸Šæ–¹ */
      pointer-events: none; /* åˆå§‹ä¸å¯ç‚¹å‡» */
      opacity: 0;
      transition: opacity 0.3s ease-in-out;
    }
    .split-circle-wrap.active {
      opacity: 1;
      pointer-events: auto; /* æ¿€æ´»åå¯ç‚¹å‡» */
    }

    /* å¤–åœˆ+å†…åœˆ: ç»å¯¹å®šä½å åŠ , åšåˆ†è£‚åŠ¨ç”» */
    .outer-ring,
    .inner-circle {
      position: absolute;
      top: 0; left: 0;
      width: 80px; height: 80px;
      border-radius: 50%;
    }
    .outer-ring {
      border: 3px solid #007aff; /* Appleè“ */
      background: transparent;
    }
    .inner-circle {
      background: #444;  /* å¯æ”¹æˆç°è‰²/é»‘è‰² */
    }

    /* ========== åŠ¨ç”»å…³é”®å¸§ ========== */
    @keyframes circleEnter {
      0% {
        transform: scale(0);
      }
      30% {
        transform: scale(1);
      }
      60% {
        /* åˆ†è£‚: clip-pathæŠŠå·¦åŠè¾¹éšè—,åªç•™å³åŠè¾¹(æ¼”ç¤º) */
        clip-path: inset(0 50% 0 0);
      }
      100% {
        clip-path: inset(0 50% 0 0);
      }
    }
    @keyframes circleEnterInner {
      0% {
        transform: scale(0);
      }
      30% {
        transform: scale(1);
      }
      60% {
        /* åˆ†è£‚: clip-pathç•™å·¦åŠè¾¹,éšè—å³åŠè¾¹ */
        clip-path: inset(0 0 0 50%);
      }
      100% {
        clip-path: inset(0 0 0 50%);
      }
    }

    @keyframes circleLeave {
      0% {
        clip-path: inset(0 50% 0 0);
        transform: scale(1);
      }
      40% {
        clip-path: inset(0); /* åˆå¹¶å›å®Œæ•´åœ† */
      }
      100% {
        transform: scale(0);
      }
    }
    @keyframes circleLeaveInner {
      0% {
        clip-path: inset(0 0 0 50%);
        transform: scale(1);
      }
      40% {
        clip-path: inset(0);
      }
      100% {
        transform: scale(0);
      }
    }

    /* é€šè¿‡æ·»åŠ /ç§»é™¤ .enter / .leave ç±»æ¥è§¦å‘ */
    .outer-ring.enter {
      animation: circleEnter 0.9s forwards ease-in-out;
    }
    .inner-circle.enter {
      animation: circleEnterInner 0.9s forwards ease-in-out;
    }
    .outer-ring.leave {
      animation: circleLeave 0.9s forwards ease-in-out;
    }
    .inner-circle.leave {
      animation: circleLeaveInner 0.9s forwards ease-in-out;
    }
  </style>
</head>
<body>

  <!-- ==================== åŸä¸»å¯¼èˆª ==================== -->
  <header class="header-gradient" id="mainHeader">
    <img src="MeFan Logo.png" alt="MeFan Logo" class="logo-img">
    <nav class="desktop-nav">
      <ul class="nav-list">
        <li><a href="index.html" class="active">Home</a></li>
        <li><a href="products.html">Products</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="contact.html">Contact</a></li>
        <li><div class="search-icon" id="desktopSearchIcon">ğŸ”</div></li>
      </ul>
    </nav>
    <div class="mobile-icons">
      <span id="mobileSearchIcon" class="mobile-search-icon">ğŸ”</span>
      <div class="vertical-hamburger" id="menuIcon">
        <div class="v-bar"></div>
        <div class="v-bar"></div>
        <div class="v-bar"></div>
      </div>
    </div>
    <nav id="mobileNav">
      <div class="close-btn" id="closeBtn">&times;</div>
      <ul>
        <li><a href="javascript:void(0);" data-level="home">Home</a></li>
        <li><a href="javascript:void(0);" data-level="products">Products</a></li>
        <li><a href="javascript:void(0);" data-level="about">About</a></li>
        <li><a href="javascript:void(0);" data-level="contact">Contact</a></li>
      </ul>
    </nav>
  </header>

  <!-- ==================== æ¨ªå¹… Banner ==================== -->
  <div class="banner-promo">
    Buy now with special offers! <a href="sample.html" target="_blank">Shop &gt;</a>
  </div>

  <!-- ==================== MeFan X1 å›¾ç‰‡åŒº ==================== -->
  <section class="section1-hero">
    <img src="MeFan X1.png" alt="MeFan X1" class="section1-hero-img">
    <div class="section1-hero-content">
      <h1 class="section1-title">Experience Next-Gen Sound</h1>
      <h2 class="section1-subtitle">Unleash the power of wireless audio.</h2>
      <a href="sample.html" target="_blank" class="section1-buy-btn">Buy</a>
      <p class="section1-price">From $599 or $49.91/mo. for 12 mo.*</p>
    </div>
  </section>

  <!-- ==================== Section2 Highlights (è½®æ’­) ==================== -->
  <section id="section2-highlights" class="section2-highlights">
    <h2 class="section2-title">Highlights</h2>
    <div class="section2-carousel-wrapper">
      <div class="section2-carousel-inner">
        <div class="section2-carousel-item" data-index="0">
          <img src="MeFan Pro.png" width="1314" height="520" alt="MeFan Pro">
          <div class="section2-caption">Experience premium audio quality</div>
        </div>
        <div class="section2-carousel-item" data-index="1">
          <img src="MeFan Lite.png" width="1314" height="520" alt="MeFan Lite">
          <div class="section2-caption">Lightweight design for allâ€‘day wear</div>
        </div>
        <div class="section2-carousel-item" data-index="2">
          <img src="A nice girl wearing headphones.png" width="1314" height="520" alt="Girl Wearing Headphones">
          <div class="section2-caption">Immersive sound wherever you go</div>
        </div>
      </div>
    </div>
    <!-- è½®æ’­åº•éƒ¨æ§ä»¶ (åŸæœ‰: æ’­æ”¾, dots, åˆ·æ–°) -->
    <div class="section2-controls">
      <button class="section2-play-btn" title="Play">â–¶</button>
      <div class="section2-dots">
        <span class="section2-dot" data-index="0"></span>
        <span class="section2-dot" data-index="1"></span>
        <span class="section2-dot" data-index="2"></span>
      </div>
      <button class="section2-refresh-btn" title="Restart">&#10227;</button>
    </div>

    <!-- ==================== æ–°å¢ï¼šåˆ†è£‚å¼åœ†åœˆå®¹å™¨ ==================== -->
    <div class="split-circle-wrap" id="splitCircle">
      <div class="outer-ring"></div>
      <div class="inner-circle"></div>
    </div>
  </section>

  <!-- ==================== æ¡Œé¢ç«¯æ–°å¯¼èˆª (Mefan Air) ==================== -->
  <div class="mefan-air-wrap" id="mefanAirWrap">
    <nav class="mefan-air-nav" id="mefanAirNavDesktop">
      <div class="mefan-air-left">Mefan Air</div>
      <ul class="mefan-air-list">
        <li><a href="sample.html">Overview</a></li>
        <li><a href="sample.html">Tech Specs</a></li>
        <li><a href="sample.html">Compare</a></li>
        <li><a href="sample.html">Why mefan</a></li>
        <li><a href="sample.html">Buy</a></li>
      </ul>
    </nav>
  </div>

  <!-- ==================== ç§»åŠ¨ç«¯æ–°å¯¼èˆª (Mefan Air) ==================== -->
  <nav id="mobileAirNav" class="mobile-air-nav">
    <div class="mobile-air-top">
      <div class="mobile-air-left">Mefan Air</div>
      <div class="mobile-air-right">
        <span id="mobileAirToggleBtn" class="mobile-air-toggle-btn">&#x2304;</span>
        <a href="sample.html" target="_blank" class="mobile-air-buy">Buy</a>
      </div>
    </div>
    <div id="mobileAirPanel" class="mobile-air-panel">
      <ul class="mobile-air-panel-list">
        <li><a href="sample.html" target="_blank">Overview</a></li>
        <li><a href="sample.html" target="_blank">Tech Specs</a></li>
        <li><a href="sample.html" target="_blank">Compare</a></li>
        <li><a href="sample.html" target="_blank">Why mefan</a></li>
      </ul>
    </div>
  </nav>
  <div id="mobileAirBlur" class="mobile-air-blur"></div>

  <!-- ==================== é¡µé¢ä¸»ä½“å†…å®¹ ==================== -->
  <main style="height: 1200px;">
    <h1>Welcome to Mefan</h1>
    <p>å‘ä¸‹æ»šåŠ¨ 400px åå¯ä»¥çœ‹åˆ°å¯¼èˆªåˆ‡æ¢æ•ˆæœã€‚æ»šåˆ°è½®æ’­åŒºåº•éƒ¨è¿˜å·®180pxå¤„æ—¶ï¼Œä¼šå‡ºç°â€œåœ†åœˆåˆ†è£‚â€åŠ¨ç”»æŒ‰é’®ã€‚</p>
  </main>

  <!-- ==================== åŸæœ‰ç§»åŠ¨ç«¯å¤šçº§èœå• (ä¿ç•™) ==================== -->
  <div id="mobileNavLevel2Home" class="menu-panel menu-panel--level2">
    <div class="menu-panel__header">
      <div class="menu-panel__back">&lt; è¿”å›</div>
      <div class="menu-panel__title">Explore the Mefan</div>
      <div class="menu-panel__close">&times;</div>
    </div>
    <div class="menu-panel__content">
      <ul>
        <li><a href="http://mefan.42web.io" target="_blank">Explore the Mefan</a></li>
      </ul>
    </div>
  </div>
  <div id="mobileNavLevel2Products" class="menu-panel menu-panel--level2">
    <div class="menu-panel__header">
      <div class="menu-panel__back">&lt; è¿”å›</div>
      <div class="menu-panel__title">Products</div>
      <div class="menu-panel__close">&times;</div>
    </div>
    <div class="menu-panel__content">
      <div class="menu-panel__group">
        <div class="menu-panel__group-title">MEFAN SERIES</div>
        <ul class="menu-panel__group-list">
          <li><a href="product-lite.html" target="_blank">MeFan Lite</a></li>
          <li><a href="product-x1.html" target="_blank">MeFan X1</a></li>
          <li><a href="product-pro.html" target="_blank">MeFan Pro</a></li>
        </ul>
      </div>
    </div>
  </div>
  <!-- å…¶å®ƒå¤šçº§èœå•é¢æ¿çœç•¥ -->

  <!-- ==================== å†æ”¾ä¸ªä¸»ä½“åŒº (æˆ– Footer) ==================== -->
  <main>
    <h2>More Content ...</h2>
    <p>è¿™é‡Œæ˜¯é¡µé¢å…¶å®ƒå†…å®¹â€¦â€¦</p>
  </main>

  <!-- ==================== ä¸»åŠŸèƒ½è„šæœ¬ ==================== -->
  <script>
 

  <!-- ========== æ§åˆ¶å¯¼èˆªåˆ‡æ¢çš„è„šæœ¬ ========== -->
  <script>
  document.addEventListener("DOMContentLoaded", function() {
    const mainHeader   = document.getElementById("mainHeader");
    const mefanAirWrap = document.getElementById("mefanAirWrap");
    const mobileAirNav = document.getElementById("mobileAirNav");

    window.addEventListener("scroll", function() {
      const scrollTop = window.scrollY || document.documentElement.scrollTop;
      const isMobile = window.innerWidth <= 768;

      if (!isMobile) {
        // æ¡Œé¢ç«¯æ»šåŠ¨ > 400px: éšè—ä¸»å¯¼èˆªï¼Œæ˜¾ç¤º MeFan Air
        if (scrollTop > 400) {
          mainHeader.style.transform = "translateY(-100%)";
          mainHeader.style.opacity   = "0";
          if (mefanAirWrap) mefanAirWrap.classList.add("active");
        } else {
          mainHeader.style.transform = "translateY(0)";
          mainHeader.style.opacity   = "1";
          if (mefanAirWrap) mefanAirWrap.classList.remove("active");
        }
      } else {
        // ç§»åŠ¨ç«¯æ»šåŠ¨ > 200px: éšè—ä¸»å¯¼èˆªï¼Œæ˜¾ç¤ºæ‰‹æœºç«¯ Mefan Air
        if (scrollTop > 200) {
          mainHeader.style.transform = "translateY(-100%)";
          mainHeader.style.opacity   = "0";
          if (mobileAirNav) mobileAirNav.classList.add("active");
        } else {
          mainHeader.style.transform = "translateY(0)";
          mainHeader.style.opacity   = "1";
          if (mobileAirNav) mobileAirNav.classList.remove("active");
        }
      }
    });

    // ç§»åŠ¨ç«¯ä¸‹æ‹‰é¢æ¿
    if (window.innerWidth <= 768) {
      const mobileAirToggleBtn = document.getElementById("mobileAirToggleBtn");
      const mobileAirPanel     = document.getElementById("mobileAirPanel");
      const mobileAirBlur      = document.getElementById("mobileAirBlur");
      let panelOpen = false;

      function openPanel() {
        panelOpen = true;
        if (mobileAirToggleBtn) mobileAirToggleBtn.textContent = "\u2303"; // ä¸Šç®­å¤´
        if (mobileAirPanel)     mobileAirPanel.style.maxHeight = mobileAirPanel.scrollHeight + "px";
        if (mobileAirBlur)      mobileAirBlur.classList.add("active");
      }
      function closePanel() {
        panelOpen = false;
        if (mobileAirToggleBtn) mobileAirToggleBtn.textContent = "\u2304"; // ä¸‹ç®­å¤´
        if (mobileAirPanel)     mobileAirPanel.style.maxHeight = "0";
        if (mobileAirBlur)      mobileAirBlur.classList.remove("active");
      }

      if (mobileAirToggleBtn && mobileAirPanel) {
        mobileAirToggleBtn.addEventListener("click", function() {
          panelOpen ? closePanel() : openPanel();
        });
      }
      if (mobileAirBlur) {
        mobileAirBlur.addEventListener("click", closePanel);
      }
    }
  });
  </script>

  <!-- ========== è½®æ’­ & åˆ†è£‚å¼åœ†åœˆåŠ¨ç”»è„šæœ¬ ========== -->
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    /*****************************************************
     * A) è½®æ’­ / dots / æ’­æ”¾æŒ‰é’® (ä¸ IntersectionObserver)
     *****************************************************/
    const section2 = document.getElementById('section2-highlights');
    const inner = section2.querySelector('.section2-carousel-inner');
    const dots = section2.querySelectorAll('.section2-dot');
    const controls = section2.querySelector('.section2-controls');
    const refreshBtn = section2.querySelector('.section2-refresh-btn');
    const oldPlayBtn = section2.querySelector('.section2-play-btn');
    let currentIndex = 0;

    function goToSlide(idx) {
      inner.style.transform = `translateX(-${idx * (1013 + 15)}px)`;
      dots.forEach((d,i) => d.classList.toggle('active', i===idx));
      currentIndex = idx;
    }
    dots.forEach(dot => {
      dot.addEventListener('click', () => goToSlide(+dot.dataset.index));
    });
    if (refreshBtn) {
      refreshBtn.addEventListener('click', () => goToSlide(0));
    }
    if (oldPlayBtn) {
      oldPlayBtn.addEventListener('click', () => {
        alert("Old Play Button clicked!");
      });
    }

    // æ˜¾ç¤º/éšè— controls
    const obs = new IntersectionObserver(([entry]) => {
      if (entry.isIntersecting) {
        controls.classList.add('active');
      } else {
        controls.classList.remove('active');
      }
    }, { threshold: 0.3 });
    obs.observe(section2);

    /*****************************************************
     * B) åˆ†è£‚å¼åœ†åœˆåŠ¨ç”»
     * - æ»šåŠ¨åˆ° #section2-highlights çš„åº•éƒ¨ <= -180px æ—¶
     *   => è§¦å‘ "enter" åŠ¨ç”»(åˆ†è£‚å‡ºç°)
     * - ç¦»å¼€å => "leave" åŠ¨ç”»(åˆå¹¶æ¶ˆå¤±)
     *****************************************************/
    const splitCircle = document.getElementById('splitCircle');
    const outerRing   = splitCircle.querySelector('.outer-ring');
    const innerCircle = splitCircle.querySelector('.inner-circle');

    let isShown = false;    // å½“å‰æ˜¯å¦å¤„äºæ˜¾ç¤º(åˆ†è£‚)çŠ¶æ€
    let leaving = false;    // æ˜¯å¦æ­£åœ¨ç¦»å¼€åŠ¨ç”»

    // ç»™åœ†åœˆåŠ ä¸ªç‚¹å‡»äº‹ä»¶æ¼”ç¤º
    splitCircle.addEventListener('click', () => {
      alert("Splitting circle clicked!");
    });

    window.addEventListener('scroll', handleScroll);

    function handleScroll() {
      if (!splitCircle || !section2) return;
      const rect = section2.getBoundingClientRect();
      const distanceToBottom = rect.bottom - window.innerHeight;

      // å½“ distanceToBottom <= -180 => æ˜¾ç¤º(åˆ†è£‚)
      if (distanceToBottom <= -180 && distanceToBottom > -2000) {
        if (!isShown) {
          showCircle();
        }
      } else {
        if (isShown) {
          hideCircle();
        }
      }
    }

    function showCircle() {
      isShown = true;
      leaving = false;
      splitCircle.classList.add('active');  // è®©å®¹å™¨å¯è§
      // ç§»é™¤ç¦»å¼€åŠ¨ç”»class
      outerRing.classList.remove('leave');
      innerCircle.classList.remove('leave');
      // æ·»åŠ è¿›å…¥åŠ¨ç”»class
      outerRing.classList.add('enter');
      innerCircle.classList.add('enter');

      // åŠ¨ç”»ç»“æŸåç§»é™¤ .enter
      outerRing.addEventListener('animationend', onEnterEnd);
      innerCircle.addEventListener('animationend', onEnterEnd);
    }

    function onEnterEnd(e) {
      if (e.animationName === 'circleEnter' || e.animationName === 'circleEnterInner') {
        e.target.classList.remove('enter');
      }
    }

    function hideCircle() {
      isShown = false;
      leaving = true;
      // åŠ  .leave
      outerRing.classList.remove('enter');
      innerCircle.classList.remove('enter');
      outerRing.classList.add('leave');
      innerCircle.classList.add('leave');

      // åŠ¨ç”»ç»“æŸåéšè—å®¹å™¨
      outerRing.addEventListener('animationend', onLeaveEnd);
      innerCircle.addEventListener('animationend', onLeaveEnd);
    }

    function onLeaveEnd(e) {
      if (e.animationName === 'circleLeave' || e.animationName === 'circleLeaveInner') {
        e.target.classList.remove('leave');
      }
      if (!outerRing.classList.contains('leave') && 
          !innerCircle.classList.contains('leave')) {
        splitCircle.classList.remove('active');
      }
    }
  });
  </script>
</body>
</html>
