<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>Carousel with Alpha Shift</title>
  <link rel="stylesheet" href="styles.css">
  <script src="scripts.js" defer></script>
  <script src="scroll.js" defer></script> <!-- 引入优化的滚动脚本 -->
  <style>
    /* ========== 全局基础样式 ========== */
    body {
      margin: 0; padding: 0;
      background: #f0f0f0;
      font-family: Arial, sans-serif;
    }
    h2 { text-align: center; margin: 20px 0; }

    /* ========== 桌面端样式 ========== */
   .demo1-carousel-container {
  position: relative;
  width: 100%;
  height: 495px; /* 固定高度 */
  overflow: hidden;
  margin: auto;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0 10%; /* 两侧留白 */
}

/* ===== 轮播轨道 ===== */
.demo1-carousel-track {
  display: flex; /* 使用 flex 布局 */
  gap: 15px; /* 图片之间的间隔 */
  transition: transform 0.5s ease-in-out;
  justify-content: flex-start; /* 确保图片从左开始排列 */

}

.demo1-carousel-slide {
 flex: 0 0 auto;
  width: 100%;
  position: relative; /* Relative positioning to position the overlay */
  opacity: 1 !important;
  transition: opacity 0.3s ease-in-out;
  display: flex;
  justify-content: center;
  align-items: center;
position: relative; /* 若用 ::before 需要父级 position: relative */原没有触发去阴影
}
.demo1-carousel-slide img {
width: 100%; /* Ensure the image adapts to the container's width */
    height: auto; /* Maintain the aspect ratio of the images */
    display: block;
    border-radius: 10px;
filter: none !important;
  opacity: 1 !important;
}
.demo1-carousel-slide.shadow {
  /* 简单做法：让其整体变暗 */
  filter: brightness(0.6);
  transition: filter 0.3s;
}

/* 或者用半透明遮罩 (叠加在slide上) */
.demo1-carousel-slide.shadow::before {
  content: "";
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0,0,0,0.2);
  pointer-events: none;
}
/* ===== 覆盖层：从下往上的动画效果 ===== */
.demo1-overlay {
  position: absolute;
  left: 10%; 原50%/* 桌面端：按钮和文字的相对位置 */
 padding-bottom: 40px;原bottom
  z-index: 10; /* 确保按钮和文字在图片之上 */
    gap: 10px; /* 按钮和文字之间的间隔 */
display: flex;
  flex-direction: column;
  align-items: flex-start;
  opacity: 0; /* 初始状态不可见 */
  transform: translateY(50px); /* 初始位置在下方 */
  transition: transform 0.8s cubic-bezier(0.22, 1, 0.36, 1), opacity 0.8s ease-in-out;
white-space: nowrap; /* 禁止自动换行 */
  display: inline-block; /* 建议配合 inline-block，效果更可控 */
}
/* 父容器：行内排列，底部对齐 */
.demo1-bottom-row {
  display: flex;
  align-items: flex-end; /* 元素间的底部对齐 */
  gap: 10px;            /* 按钮和文字的间距 */
  position: relative;   /* 或绝对定位也可，看需求 */
}

.demo1-title {
  position: absolute;
  left: 0;            /* 与按钮左边对齐 */
bottom:60px;原margin和bottom和210px;       /* 假设按钮高度 ~ 40px，上方留 5px 空隙 */
  font-size:3.1rem;
  font-weight: bold;
  color: white;
  text-shadow: 2px 2px 8px rgba(0,0,0,0.3), 0 0 25px rgba(255,255,255,0.5);
padding-left:15px;
opacity: 0; 
transform: translateY(10px); */
white-space: nowrap; /* 禁止自动换行 */
  display: inline-block; /* 建议配合 inline-block，效果更可控 */
overflow: visible;

  /* 动画或渐入逻辑，如初始下移、active 时上移 */
  opacity: 0;
  transform: translateY(40px);
  transition: transform 0.6s cubic-bezier(0.22, 1, 0.36, 1), opacity 0.6s ease-in-out;
  z-index: 999;
}
/* 父容器：相对定位，让按钮与标题可通过绝对定位精确控制 */注:.调按钮框高度的,可以不启用BuqiYong,用bottom
demo1-button-title-group {
  position: relative;
width:460px;  /* 示例值，可根据按钮宽度或设计需求调整 */
  height: 200px; /* 给足够高度容纳按钮+标题 */
}
/* 下行文字，例如 "Sci-Fi · New season" */
.demo1-text-bottom {
position:fixed
  font-size: 1rem;
padding-bottom: 40px;原Margin和top
  opacity: 1;
  transform: translateY(40px);
  transition: transform 0.6s cubic-bezier(0.22, 1, 0.36, 1), opacity 0.6s ease-in-out;
  z-index: 1000;
  color: white; 
display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap:  0px; /* 按钮和文字之间的间隔 */
 left: 50%; /* 调整文字的水平位置，使其与按钮对齐 */
padding-bottom:5px; /* 将文字稍微放低一点，保持适当的间距 */
padding-left:0px; /* 水平向右移动65px */原20
}

/* 文字的单独动画 */
.demo1-text-top, .demo1-text-bottom {
  opacity: 0;
  transform: translateY(40px); /* 初始位置更低一点 */
  transition: transform 0.6s cubic-bezier(0.22, 1, 0.36, 1), opacity 0.6s ease-in-out;
}
/* 轮播激活时再让覆盖层显示 */
.demo1-carousel-slide.active .demo1-overlay {
  opacity: 1;
  transform: translateY(0); /* 复位 */
}
/* 按钮渐入 */
.demo1-carousel-slide.active .demo1-explore-btn {
  opacity: 1;
  transform: translateY(0);
  transition-delay: 0.4s; /* 按钮比文字慢 0.4s */
}
/* 文字渐入 */
.demo1-carousel-slide.active .demo1-text-top,
.demo1-carousel-slide.active .demo1-text-bottom {
  opacity: 1;
  transform: translateY(0);
  transition-delay: 0.2s; /* 文字比整体动画稍微慢 0.2s */
}
/* 按钮样式 */
.demo1-explore-btn {
  padding: 10px 20px;
 background-color: #007BFF;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  margin-top: 15px;
z-index: 999;
opacity: 0;
  transform: translateY(60px); /* 初始往下偏移 60px */
  transition: transform 0.8s cubic-bezier(0.22, 1, 0.36, 1), opacity 0.8s ease-in-out;
}

.demo1-explore-btn:hover {
  background-color: #0056b3;
}

/* 上行文字，例如 "Stream now" */
.demo1-text-top {
 position: absolute;
  font-size: 1.1rem;
  margin-bottom: 320px;
  opacity: 1;
  transform: translateY(40px);
  transition: transform 0.6s cubic-bezier(0.22, 1, 0.36, 1), opacity 0.6s ease-in-out;
  z-index: 999;
  color: white; /* 设置字体颜色为白色 */
  text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3), 0 0 25px rgba(255, 255, 255, 0.5); /* 文字阴影效果，增加亮度 */
}


/* 轮播激活时再让文字显示 */
.demo1-carousel-slide.active .demo1-text-bottom {
  opacity: 1;
  transform: translateY(0); /* 文字从下方上升 */
}

.demo1-carousel-slide.active .demo1-title {
  opacity: 1;
  transform: translateY(0);
  transition-delay: 0.4s; /* 按钮比文字慢 0.4s */
   未启用weiqiyongtransform换translateX(-50%) translateY(0); /* 上升效果，按钮和文字出现 */
}
/* ===== 小圆点容器 ===== */
.demo1-carousel-dots-container {
  position: relative;  /* 独立模块 */
  width: 100%;
  height: 36px;        /* 预留足够空间 */原23
  display: flex;
  justify-content: center;
  align-items: center;
}

/* 小圆点区域 */
.demo1-carousel-dots {
  display: flex;
  justify-content: center;
  position: absolute;
  bottom: 5px;
  width: 100%;
}

.demo1-carousel-dot {
  width: 10px;
  height: 10px;
  background: #ccc;
  border-radius: 50%;
  margin: 0 5px;
  cursor: pointer;
}

.demo1-carousel-dot.active {
  background: #007BFF;
}

/* 控制按钮的显示 */
.demo1-carousel-prev,
.demo1-carousel-next {
  display: none; /* 默认在桌面端隐藏按钮 */
}

/* For PC: Hide the previous/next buttons */
@media (min-width: 1024px) {
    .demo1-carousel-prev,
    .demo1-carousel-next {
        display: none; /* Hide on large screens */
    }

    .demo1-carousel-dots {
        display: block; /* Ensure the dots are visible on larger screens */
        text-align: center;
        margin-top: 15px;
    }

    .demo1-carousel-dot {
        display: inline-block;
        width: 10px;
        height: 10px;
        background: #ccc;
        border-radius: 50%;
        margin: 0 5px;
        cursor: pointer;
        transition: background 0.3s;
    }

    .demo1-carousel-dot.active {
        background: #007BFF;
    }
}
@media (min-width: 1024px) {
    .demo1-carousel-prev,
    .demo1-carousel-next {
        display: none; /* Hide on large screens */
    }

    .demo1-carousel-dots {
        display: block; /* Ensure the dots are visible on larger screens */
        text-align: center;
        margin-top: 15px;
    }

    .demo1-carousel-dot {
        display: inline-block;
        width: 10px;
        height: 10px;
        background: #ccc;
        border-radius: 50%;
        margin: 0 5px;
        cursor: pointer;
        transition: background 0.3s;
    }

    .demo1-carousel-dot.active {
        background: #007BFF;
    }
}
    /* ========== 移动端适配 ========== */
@media (max-width: 768px) {
  .demo1-carousel-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 85%; /* 手机端宽度减少 15% */
    min-height: 495px;
    height: 495px;
    margin-top: 12px;
    padding-bottom: 45px; /* 适当增加底部空间，以适应小圆点 */
  }

  .demo1-carousel-track {
    display: flex;
    flex-direction: column;
    gap: 15px; /* 图片之间的间隔 */
    align-items: center;
    width: 100%;
    height: 495px;
  }

  .demo1-carousel-slide {
    width: 100%;
    min-height: 495px;
    max-height: 495px;
    height: 495px; /* 彻底固定高度 */
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
  }

  .demo1-carousel-slide img {
    width: 100%;
    min-width: 100%;
    min-height: 495px;
    height: 495px; /* 强制固定高度 */
    object-fit: cover; /* 确保填充，不拉伸 */
    border-radius: 10px;
    display: block; /* 避免 inline 属性影响高度 */
  }

 
.demo1-carousel-prev, .demo1-carousel-next {
        display: block;
      }

 

      .demo1-carousel-dots-container {
        position: absolute;
        left: 0; right: 0; bottom: 10px;
        margin: 0; z-index: 99;
        display: flex; justify-content: center; align-items: center;
      }
      .demo1-carousel-dot {
        width: 8px; height: 8px; margin: 0 4px;
      }
    }
  </style>
</head>
<body>
  <h2>Carousel with Alpha Shift</h2>

<!-- ===== 轮播容器 ===== -->
<div class="demo1-carousel-container">
  <button class="demo1-carousel-prev">&lt;</button>
  <!-- 新增 demo1-carousel-track-wrapper 作为包裹层 -->
  <div class="demo1-carousel-track-wrapper">
    <div class="demo1-carousel-track">
    <!-- 轮播项1 -->
    <div class="demo1-carousel-slide">
      <a href="example.html">
        <img src="Di cai hua.png" alt="Di cai hua">
      </a>
      <div class="demo1-overlay">
        <!-- 新增 .demo1-button-title-group 作为父容器 -->
        <div class="demo1-button-title-group">
          <!-- 保留原先的 .demo1-bottom-row，按钮和 New season. 并排 -->
          <div class="demo1-bottom-row">
            <button class="demo1-explore-btn">Explore now</button>
            <div class="demo1-text-bottom">New season.</div>
          </div>
          <!-- 标题放在同一个父容器里，用绝对定位控制它与按钮左端对齐、在上方 -->
          <div class="demo1-title">地菜花</div>
        </div>
      </div>
    </div>

    <!-- 轮播项2 -->
    <div class="demo1-carousel-slide">
      <a href="example.html">
        <img src="Lv-Se-qing-cai.png" alt="Lv-Se-qing-cai">
      </a>
      <div class="demo1-overlay">
        <div class="demo1-button-title-group">
          <div class="demo1-bottom-row">
            <button class="demo1-explore-btn">Explore now</button>
            <div class="demo1-text-bottom">New season.</div>
          </div>
          <div class="demo1-title">小颗青菜</div>
        </div>
      </div>
    </div>

    <!-- 轮播项3 -->
    <div class="demo1-carousel-slide">
      <a href="example.html">
        <img src="Two baskets of vegetables.png" alt="Two baskets of vegetables">
      </a>
      <div class="demo1-overlay">
        <div class="demo1-button-title-group">
          <div class="demo1-bottom-row">
            <button class="demo1-explore-btn">Explore now</button>
            <div class="demo1-text-bottom">New season.</div>
          </div>
          <div class="demo1-title">青菜</div>
        </div>
      </div>
    </div>

    <!-- 轮播项4 -->
    <div class="demo1-carousel-slide">
      <a href="product-lite.html">
        <img src="A full-body portrait wearing a stylish summer work uniform.png" alt="红菜苔">
      </a>
      <div class="demo1-overlay">
        <div class="demo1-button-title-group">
          <div class="demo1-bottom-row">
            <button class="demo1-explore-btn">Explore now</button>
            <div class="demo1-text-bottom">New season.</div>
          </div>
          <div class="demo1-title">红菜苔</div>
       
</div>
        </div>
      </div>
    </div>
  </div>

  <button class="demo1-carousel-next">&gt;</button>
</div>

<!-- 小圆点容器放在轮播容器外部 -->
<div class="demo1-carousel-dots-container">
  <div class="demo1-carousel-dots">
    <span class="demo1-carousel-dot"></span>
    <span class="demo1-carousel-dot"></span>
    <span class="demo1-carousel-dot"></span>
    <span class="demo1-carousel-dot"></span>
  </div>
</div>


<script>
(function () { 
  const initdemo1CarouselTrack = () => {
    const container = document.querySelector(".demo1-carousel-container");
    const track = document.querySelector(".demo1-carousel-track");
    let slides = Array.from(document.querySelectorAll(".demo1-carousel-slide"));
    const prevBtn = document.querySelector(".demo1-carousel-prev");
    const nextBtn = document.querySelector(".demo1-carousel-next");
    const dots = Array.from(document.querySelectorAll(".demo1-carousel-dot"));

    if (!container || !track || slides.length === 0 || !dots.length) return;

    const totalReal = slides.length;
    let isAnimating = false;

    // 克隆首尾幻灯片
    const firstClone = slides[0].cloneNode(true);
    const lastClone = slides[totalReal - 1].cloneNode(true);
    track.appendChild(firstClone);
    track.insertBefore(lastClone, track.firstChild);

    slides = Array.from(track.querySelectorAll(".demo1-carousel-slide")); 
    let currentIndex = 1; 
    let slideWidth = slides[1].getBoundingClientRect().width + 15; 

    function updateCarousel(animated = true) {
      track.style.transition = animated ? "transform 0.5s ease-in-out" : "none";
      track.style.transform = `translateX(${-currentIndex * slideWidth}px)`;

      // 更新小圆点
      let dotIndex = (currentIndex === 0) ? totalReal - 1 : 
                     (currentIndex === slides.length - 1) ? 0 : 
                     currentIndex - 1;
      dots.forEach((dot, i) => dot.classList.toggle("active", i === dotIndex));

      // 移除所有 active/prev/next/shadow
      slides.forEach(sl => sl.classList.remove("active", "prev", "next", "shadow"));

      // 禁用内部 <a> 点击
      slides.forEach(sl => {
        const aTag = sl.querySelector("a");
        if (aTag) aTag.style.pointerEvents = "none";
      });

      // 设定 active slide
      slides[currentIndex].classList.add("active");
      const centerA = slides[currentIndex].querySelector("a");
      if (centerA) centerA.style.pointerEvents = "auto";

      // 设定 prev / next
      const nextIndex = (currentIndex + 1) % slides.length;
      const prevIndex = (currentIndex - 1 + slides.length) % slides.length;
      slides[nextIndex].classList.add("next");
      slides[prevIndex].classList.add("prev");

      // 给非 .active 的 slide 添加阴影
      slides.forEach(slide => {
        if (!slide.classList.contains("active")) {
          slide.classList.add("shadow");
        }
      });

      // 修复 Explore Now 按钮仅在 .active 显示
      document.querySelectorAll(".demo1-explore-btn").forEach(btn => {
        btn.style.opacity = "0";
        btn.style.pointerEvents = "none";
      });
      const activeBtn = slides[currentIndex].querySelector(".demo1-explore-btn");
      if (activeBtn) {
        activeBtn.style.opacity = "1";
        activeBtn.style.pointerEvents = "auto";
      }
    }

    function nextSlide() {
      if (isAnimating) return;
      isAnimating = true;
      currentIndex++;
      updateCarousel();

      setTimeout(() => {
        if (currentIndex === slides.length - 1) {
          track.style.transition = "none";
          currentIndex = 1;
          updateCarousel(false);
        }
        isAnimating = false;
      }, 500);
    }

    function prevSlide() {
      if (isAnimating) return;
      isAnimating = true;
      currentIndex--;
      updateCarousel();

      setTimeout(() => {
        if (currentIndex === 0) {
          track.style.transition = "none";
          currentIndex = totalReal;
          updateCarousel(false);
        }
        isAnimating = false;
      }, 500);
    }

    function jumpToSlide(index) {
      if (isAnimating) return;
      isAnimating = true;
      currentIndex = index + 1;
      updateCarousel();
      setTimeout(() => isAnimating = false, 500);
    }

    prevBtn?.addEventListener("click", prevSlide);
    nextBtn?.addEventListener("click", nextSlide);
    dots.forEach((dot, index) => dot.addEventListener("click", () => jumpToSlide(index)));

    let interval = setInterval(nextSlide, 5000);
    function resetInterval() {
      clearInterval(interval);
      interval = setInterval(nextSlide, 5000);
    }

    track.addEventListener("transitionend", () => {
      isAnimating = false;
    });

    // 初始化
    track.style.transition = "none";
    updateCarousel();
    setTimeout(() => {
      track.style.transition = "transform 0.5s ease-in-out";
    }, 50);

    // 处理手机端按钮显示
    if (window.innerWidth <= 768) {
      prevBtn.style.display = "block";
      nextBtn.style.display = "block";
    } else {
      prevBtn.style.display = "none";
      nextBtn.style.display = "none";
    }

    // 点击逻辑
    slides.forEach(slide => {
      slide.addEventListener("click", (e) => {
        if (slide.classList.contains("active")) {
          // 允许 <a> 正常跳转
        } else if (slide.classList.contains("next")) {
          e.preventDefault();
          nextSlide();
          resetInterval();
        } else if (slide.classList.contains("prev")) {
          e.preventDefault();
          prevSlide();
          resetInterval();
        }
      });
    });

    // Explore Now 按钮逻辑
    const exploreBtns = document.querySelectorAll('.demo1-explore-btn');
    exploreBtns.forEach(btn => {
      btn.addEventListener('click', (e) => {
        const link = e.target.closest('.demo1-carousel-slide')?.querySelector('a');
        if (link) {
          window.location.href = link.href;
        }
      });
    });

    // 触摸滑动交互
    let startX = 0;
    let isSwiping = false;

    container.addEventListener('touchstart', (e) => {
      if (isAnimating) return;
      isSwiping = true;
      startX = e.touches[0].clientX;
    });

    container.addEventListener('touchend', (e) => {
      if (!isSwiping) return;
      let endX = e.changedTouches[0].clientX;
      let distance = endX - startX;
      isSwiping = false;

      if (Math.abs(distance) > 50) {
        if (distance < 0) {
          nextSlide();
        } else {
          prevSlide();
        }
        resetInterval();
      }
    });
  };

  window.addEventListener("load", initdemo1CarouselTrack);
})();












</script>
</body>
</html>
